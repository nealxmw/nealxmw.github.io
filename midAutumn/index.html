<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>中秋快乐</title>
    <style>
      body {
        overflow: hidden;
      }

      * {
        padding: 0px;
        margin: 0px;
      }

      @keyframes nightfall {
        from {
          background: #ffe384;
        }

        10% {
          background: #ffff00;
        }

        20% {
          background: #ffd700;
        }

        30% {
          background: #daa569;
        }

        40% {
          background: #8b4513;
        }

        50% {
          background: #734a12;
        }

        80% {
          background: #292421;
        }

        to {
          background: #2a2d38;
        }
      }

      .container {
        width: 100vw;
        height: 100vh;
        transition: all ease;
        animation: nightfall 8s;
        background: #2a2d38;
        overflow: hidden;
      }

      @keyframes sunfallmoonrise {
        from {
          background: #ffffff;
          top: 10vh;
        }
        49% {
          background: #a7322c;
          top: 80vh;
        }
        50% {
          background: #a7322c;
          top: 82vh;
        }
        51% {
          background: #fffaf0;
          top: 80vh;
        }

        to {
          background: #fffaf0;
          /* 'radial-gradient(rgba(249, 220, 96, 0.9), rgba(249, 220, 96, 1))' */
          top: 10vh;
        }
      }

      .sun-and-moon {
        width: 200px;
        height: 200px;
        animation: sunfallmoonrise 8s;
        border-radius: 50%;
        position: absolute;
        left: 20vw;
        top: 10vh;
        background: #fffaf0;
        box-shadow: 0px 0px 20px #f9dc60;
        transition: all 3s ease;
        z-index: 10;
      }

      @keyframes mountain {
        from {
          background: rgb(25, 175, 75);
        }

        16% {
          background: rgb(168, 192, 35);
        }

        32% {
          background: rgb(199, 106, 31);
        }

        50% {
          background: rgb(167, 66, 26);
        }

        to {
          background: rgb(56, 56, 27);
        }
      }

      .mountain-common {
        position: absolute;
        z-index: 999;
        border-radius: 50%;
        background: rgb(56, 56, 27);
        animation: mountain 8s;
      }

      .mountain-a {
        width: 80vw;
        height: 400px;
        top: 80vh;
        left: -20vw;
      }

      .mountain-b {
        width: 100vw;
        height: 800px;
        top: 65vh;
        left: 40vw;
      }

      @keyframes moon-bigger {
        from {
          width: 200px;
          height: 200px;
          left: 20vw;
          top: 10vh;
        }

        to {
          width: 600px;
          height: 600px;
          top: calc(50vh - 300px);
          left: calc(40vw - 300px);
        }
      }

      @keyframes mountain-down-a {
        from {
          top: 80vh;
          left: -20vw;
        }

        to {
          top: 115vh;
          left: -300px;
          opacity: 0.6;
        }
      }

      @keyframes mountain-down-b {
        from {
          top: 65vh;
          left: 40vw;
        }

        to {
          top: 100vh;
          left: calc(60vw - 300px);
          opacity: 0.6;
        }
      }

      @keyframes star-scale {
        from {
          transform: scale(1, 1);
        }

        25% {
          transform: scale(0.1, 0.1);
        }

        50% {
          transform: scale(1, 1);
        }

        25% {
          transform: scale(2, 2);
        }

        to {
          transform: scale(1, 1);
        }
      }

      .star {
        height: 3px;
        width: 3px;
        background-color: #fffaf0;
        border-radius: 50%;
        position: absolute;
        animation: star-scale 2s;
        animation-iteration-count: infinite;
      }

      .poetry div {
        width: 60px;
        height: 60px;
        margin-top: 6px;
      }

      .poetry-top {
        position: absolute;
        top: 20vh;
        right: 48px;
      }

      .poetry-down {
        position: absolute;
        top: 30vh;
        right: 130px;
      }

      #word-cloud__container {
        width: 600px;
        height: 600px;
        top: calc(50vh - 300px);
        left: calc(40vw - 300px);
        position: absolute;
        transition: all 2s;
        border-radius: 50%;
        overflow: hidden;
        opacity: 0.6;
        z-index: 1;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="sun-and-moon"></div>
      <div id="word-cloud__container"></div>
      <div class="mountain-common mountain-a"></div>
      <div class="mountain-common mountain-b"></div>
      <div class="poetry-top poetry">
        <div id="dan"></div>
        <div id="yuan"></div>
        <div id="ren"></div>
        <div id="chang"></div>
        <div id="jiu"></div>
      </div>
      <div class="poetry-down poetry">
        <div id="qian"></div>
        <div id="li"></div>
        <div id="gong"></div>
        <div id="chan"></div>
        <div id="juan"></div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.2/dist/hanzi-writer.min.js"></script>
    <script>
      const timerA = setTimeout(() => {
        clearTimeout(timerA)
        const moon =
          document.getElementsByClassName('sun-and-moon')[0]
        moon.style.animation = 'moon-bigger 5s'
        moon.style.width = '600px'
        moon.style.height = '600px'
        moon.style.top = 'calc( 50vh - 300px )'
        moon.style.left = 'calc( 40vw - 300px )'

        const mountainList =
          document.getElementsByClassName('mountain-common')
        mountainList[0].style.animation = 'mountain-down-a 5s'
        mountainList[0].style.top = '100vh'
        mountainList[1].style.animation = 'mountain-down-b 5s'
        mountainList[1].style.top = '100vh'
        // 生成星星
        const timerB = setTimeout(() => {
          clearTimeout(timerB)
          const arr = new Array(60)
          for (const item of arr) {
            const dom = document.createElement('div')
            dom.className = 'star'
            dom.style.left = `${Math.random() * 100}vw`
            dom.style.top = `${Math.random() * 100}vh`
            setTimeout(() => {
              document.body.appendChild(dom)
            }, 15000 * Math.random())
          }
          // 写诗
          const timerC = setTimeout(() => {
            clearTimeout(timerC)
            const WRITER_CONFIG = {
              width: 60,
              height: 60,
              padding: 2,
              delayBetweenStrokes: 0,
              strokeAnimationSpeed: 2,
              showCharacter: false,
              showOutline: false,
              strokeColor: '#F5F5F5'
            }
            // 定义诗句
            const getWriterList = () => {
              let writerList = []
              writerList.push(
                HanziWriter.create('dan', '但', WRITER_CONFIG)
              )
              writerList.push(
                HanziWriter.create('yuan', '愿', WRITER_CONFIG)
              )
              writerList.push(
                HanziWriter.create('ren', '人', WRITER_CONFIG)
              )
              writerList.push(
                HanziWriter.create('chang', '长', WRITER_CONFIG)
              )
              writerList.push(
                HanziWriter.create('jiu', '久', WRITER_CONFIG)
              )
              writerList.push(
                HanziWriter.create('qian', '千', WRITER_CONFIG)
              )
              writerList.push(
                HanziWriter.create('li', '里', WRITER_CONFIG)
              )
              writerList.push(
                HanziWriter.create('gong', '共', WRITER_CONFIG)
              )
              writerList.push(
                HanziWriter.create('chan', '婵', WRITER_CONFIG)
              )
              writerList.push(
                HanziWriter.create('juan', '娟', WRITER_CONFIG)
              )
              return writerList
            }
            // 开始写诗
            const generateAnimateWriter = async writerList => {
              const writerCount = writerList.length
              for (const writer of writerList) {
                await writer.animateCharacter()
              }
            }
            generateAnimateWriter(getWriterList())
          }, 1000)
        }, 5000)
      }, 9000)
    </script>
  </body>
</html>
